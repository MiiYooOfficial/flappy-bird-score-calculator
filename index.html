<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Flappy Bird Score Calculator</title>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        body {
            background: url("background.png") no-repeat center center fixed;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Main Card */
        .container {
            width: 450px;
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .bird-image {
            display: block;
            margin: 0 auto 25px auto;
            width: 130px;
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }

        input, select, button {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }


        button {
            margin-top: 20px;
            cursor: pointer;
            background-color: #f4d03f;
            border: none;
            font-weight: bold;
        }

        button:hover {
            background-color: #f1c40f;
        }

        .error {
            color: red;
            margin-top: 10px;
        }

        .score {
            margin-top: 15px;
            font-size: 20px;
            font-weight: bold;
        }

        /* Scrolling Ground */
        .ground-wrapper {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 50px;
            display: flex;
            animation: scrollGround 3s linear infinite;
            z-index: 1;
        }

        .ground {
            width: 50%;
            background: url("base.png") repeat-x;
            background-size: auto 112px;
        }

        @keyframes scrollGround {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }
    </style>
</head>

<body>

<div class="container">
    <h1>Flappy Bird Score Calculator</h1>

    <img src="flappy-bird.png" alt="Flappy Bird Logo" class="bird-image">

    <label for="collisions">Number of Collisions</label>
    <input type="number" id="collisions" min="0" max="50">

    <label for="difficulty">Difficulty</label>
    <select id="difficulty">
        <option value="Easy">Easy</option>
        <option value="Medium">Medium</option>
        <option value="Hard">Hard</option>
    </select>

    <label for="attempt">Attempt Number</label>
    <input type="number" id="attempt" min="1">

    <button onclick="calculateScore()">Calculate Score</button>

    <div class="error" id="error"></div>
    <div class="score" id="scoreDisplay"></div>
</div>

<div class="ground-wrapper">
    <div class="ground"></div>
    <div class="ground"></div>
</div>

<script>
function calculateScore() {
    const collisionsInput = document.getElementById("collisions").value.trim();
    const difficulty = document.getElementById("difficulty").value;
    const attemptInput = document.getElementById("attempt").value.trim();

    const errorDiv = document.getElementById("error");
    const scoreDiv = document.getElementById("scoreDisplay");

    errorDiv.textContent = "";
    scoreDiv.innerHTML = "";

    // Allow optional leading minus for now
    const integerPattern = /^-?[0-9]+$/;

    // First check if input is a valid integer format
    if (!integerPattern.test(collisionsInput)) {
        errorDiv.textContent = "Number of collisions must contain digits only.";
        return;
    }

    if (!integerPattern.test(attemptInput)) {
        errorDiv.textContent = "Attempt number must contain digits only.";
        return;
    }

    const collisions = parseInt(collisionsInput, 10);
    const attempt = parseInt(attemptInput, 10);

    // Now check bounds BEFORE worrying about illegal characters
    if (collisions < 0 || collisions > 50) {
        errorDiv.textContent = "Number of collisions should be an integer between 0 and 50.";
        return;
    }

    if (attempt <= 0) {
        errorDiv.textContent = "Attempt number should be a positive integer.";
        return;
    }

    // --- Placeholder scoring ---
    let difficultyMultiplier = 1;
    if (difficulty === "Medium") difficultyMultiplier = 2;
    if (difficulty === "Hard") difficultyMultiplier = 3;

    let score = (50 - collisions - (attempt - 1)) * 2 * difficultyMultiplier;
    if (score < 0) let score = 0;

    scoreDiv.innerHTML = `
        <div style="font-size:22px; margin-top:10px;">
            Your Final Score: <strong>${score}</strong> ðŸ¤©
        </div>
        <div style="margin-top: 10px; font-size: 16px;">
            Go back to the video and comment your score!
        </div>
    `;
}
</script>

</body>
</html>
